---
description: 일일 회고 26회차
cover: .gitbook/assets/Frame 85 (1).png
coverY: 0
---

# 🙂 2024.10.16

{% hint style="success" %}
_**Keep**_

1. 일일 회고를 꾸준히 하면서 성장하기 위해 노력하는 것
{% endhint %}

{% hint style="danger" %}
_**Problem**_

1. 명확한 원인을 파악하지 않고 문제를 해결하는 것
2. 여러 개의 방법 중에 최선의 방법이 아닌 빠른 방법을 선택하는 것
{% endhint %}

{% hint style="warning" %}
_**Try**_

1. 일일 회고를 통해 원인을 명확하게 파악하고 문제를 해결했는지 검토
2. 일일 회고를 통해 최선의 방법을 선택했는지 검토
{% endhint %}

## 오늘 할 일

* [x] 회사 업무
  * [x] 대량 변화 탐지시 조회 성능 측정

## 경험 및 배움

### 회사 업무

#### 대량 변화 탐지시 조회 성능 측정

변화탐지 AI 모델을 사용해서 15000x15000 크기의 영상 두 개를 비교했을 때 약 **100MB 크기의 탐지 결과**가 저장되는 것을 확인함. 100MB 탐지 결과를 프론트에서 그대로 보여주면 **조회 속도가 매우 느릴 것으로 예상**됨. 변화 탐지 결과를 조회하는 기능이 정상적으로 동작할 수 있는지 확인하기 위해 **조회 성능 측정**을 진행함.

먼저 랜덤하게 변화 탐지 결과를 생성하여 약 **20MB 크기로 테스트 데이터를 구성**함. 그 후 테스트 서버의 데이터베이스에 **테스트 데이터를 저장**한 후 해당 결과를 조회하는 API를 호출함. API가 1분 이상 소요되어 **504(Gateway Timeout) 에러가 발생**함.

정확하게 어느 로직에서 오랜 시간이 소요되는지 확인하기 위해 20MB 크기의 변화 탐지 결과를 저장하고 조회하는 **테스트 코드를 작성한 후 소요 시간을 확인**함. Repository에서 쿼리를 통해 **데이터베이스에서 데이터를 불러올 때 50초 이상 소요**되는 것을 확인함.&#x20;

20MB 크기의 데이터를 데이터베이스에서 조회하는 것이 단순히 크기가 커서 오래 걸리는 것인지 아니면 **Geometry 정보이기 때문에 느린 것인지 확인이 필요**함. 20MB인 일반 문자열을 조회했을 때 빠르게 조회될 경우 일반 문자열로 조회하도록 변경하기 위함.



## 앞으로 할 일

* [ ] 회사 업무
  * [ ] 대량 변화 탐지시 조회 성능 측정
    * [ ] 일반 문자열로 조회시 속도 확인
  * [ ] 대량 변화 탐지시 조회 성능 개선
